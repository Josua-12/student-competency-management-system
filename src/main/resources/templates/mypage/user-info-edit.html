<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사용자 정보 수정 - 마이페이지</title>

    <!-- Bootstrap 5 CSS 로드 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome 아이콘 로드 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

    <!-- 사용자 요청에 따른 개별 스타일 로드 (절대 수정 금지) -->
    <link rel="stylesheet" th:href="@{/css/mypage/user-info-edit.css}" />
</head>
<body>

<!-- 공통 헤더 역할: 모바일 전용 상단 네비게이션 및 햄버거 버튼 -->
<!-- d-md-none: MD 사이즈 미만(모바일)에서만 보임 -->
<nav class="navbar navbar-light bg-white border-bottom shadow-sm d-md-none fixed-top py-3">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1 fs-5 fw-bold text-dark">마이페이지</span>
        <!-- 햄버거 버튼 (Offcanvas 토글) -->
        <button class="btn btn-outline-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar" aria-controls="offcanvasSidebar">
            <i class="fas fa-bars"></i>
        </button>
    </div>
</nav>

<!-- 모바일 전용 Offcanvas 메뉴 (햄버거 버튼 클릭 시 좌측에서 나타남) -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasSidebar" aria-labelledby="offcanvasSidebarLabel">
    <div class="offcanvas-header border-bottom">
        <h5 class="offcanvas-title fs-5 fw-bold text-dark" id="offcanvasSidebarLabel">마이페이지 메뉴</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body p-0">
        <!-- 모바일 사이드바 네비게이션 콘텐츠 -->
        <nav class="p-3">
            <h4 class="small fw-semibold text-uppercase text-muted mb-2 px-3">마이페이지</h4>

            <!-- 메뉴 링크 (user-info-edit.html이 현재 페이지라고 가정하고 active 클래스 적용) -->
            <a href="#" class="d-flex align-items-center p-3 rounded text-dark text-decoration-none transition active">
                <i class="fas fa-user-edit me-3 text-primary"></i>
                <span>사용자 정보 수정</span>
            </a>

            <a href="#" class="d-flex align-items-center p-3 rounded text-dark text-decoration-none hover-bg-light transition">
                <i class="fas fa-chart-line me-3 text-success"></i>
                <span>역량 현황</span>
            </a>

            <a href="#" class="d-flex align-items-center p-3 rounded text-dark text-decoration-none hover-bg-light transition">
                <i class="fas fa-key me-3 text-secondary"></i>
                <span>비밀번호 변경</span>
            </a>

            <a href="#" class="d-flex align-items-center p-3 rounded text-dark text-decoration-none hover-bg-light transition">
                <i class="fas fa-sign-out-alt me-3 text-danger"></i>
                <span>로그아웃</span>
            </a>
        </nav>
    </div>
</div>

<!-- 메인 컨테이너 시작 -->
<!-- pt-5: 모바일 상단바 높이만큼 공간 확보 (d-md-none인 경우) -->
<div id="app" class="d-flex flex-column flex-md-row min-vh-100 pt-5 pt-md-0">

    <!-- 좌측 사이드바 네비게이션 (md 이상에서 보임) -->
    <!-- d-none d-md-block: 모바일에서 숨김, MD 사이즈 이상에서만 보임 -->
    <aside class="sidebar col-md-3 col-lg-2 bg-white border-end shadow-sm d-none d-md-block flex-shrink-0">
        <div class="p-4 border-bottom">
            <h3 class="fs-5 fw-bold text-dark">마이페이지</h3>
        </div>
        <nav class="p-3">
            <h4 class="small fw-semibold text-uppercase text-muted mb-2 px-3">마이페이지</h4>

            <!-- 메뉴 링크 -->
            <a href="#" class="d-flex align-items-center p-3 rounded text-dark text-decoration-none transition active">
                <i class="fas fa-user-edit me-3 text-primary"></i>
                <span>사용자 정보 수정</span>
            </a>

            <a href="#" class="d-flex align-items-center p-3 rounded text-dark text-decoration-none hover-bg-light transition">
                <i class="fas fa-chart-line me-3 text-success"></i>
                <span>역량 현황</span>
            </a>

            <a href="#" class="d-flex align-items-center p-3 rounded text-dark text-decoration-none hover-bg-light transition">
                <i class="fas fa-key me-3 text-secondary"></i>
                <span>비밀번호 변경</span>
            </a>

            <a href="#" class="d-flex align-items-center p-3 rounded text-dark text-decoration-none hover-bg-light transition">
                <i class="fas fa-sign-out-alt me-3 text-danger"></i>
                <span>로그아웃</span>
            </a>
        </nav>
    </aside>

    <!-- 메인 콘텐츠 영역 -->
    <main class="col-md-9 col-lg-10 p-4 p-md-5 main-content flex-grow-1">
        <div class="container-fluid">
            <!-- 기존 사용자 정보 수정 폼 영역 -->
            <div class="user-info-container">
                <h2 class="text-center mb-4 fs-3 fw-bold">사용자 정보 수정</h2>

                <form id="userInfoForm">
                    <div class="form-group">
                        <label for="name" class="form-label fw-semibold">이름</label>
                        <input type="text" class="form-control" id="name" readonly>
                    </div>

                    <div class="form-group">
                        <label for="email" class="form-label fw-semibold">
                            <i class="fas fa-envelope me-2"></i>이메일 <span class="text-danger">*</span>
                        </label>
                        <input type="email" class="form-control" id="email" name="email" required>
                        <span class="error-message text-danger small" id="emailError"></span>
                    </div>

                    <div class="form-group">
                        <label for="phone" class="form-label fw-semibold">
                            <i class="fas fa-phone me-2"></i>전화번호
                        </label>
                        <input type="tel" class="form-control" id="phone" name="phone">
                        <span class="error-message text-danger small" id="phoneError"></span>
                    </div>

                    <div class="form-group">
                        <label for="department" class="form-label fw-semibold">학과</label>
                        <input type="text" class="form-control" id="department" readonly>
                    </div>

                    <div class="form-group">
                        <label for="grade" class="form-label fw-semibold">학년</label>
                        <input type="text" class="form-control" id="grade" readonly>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                        <button type="button" id="cancelBtn" class="btn btn-secondary me-md-2 btn-lg">취소</button>
                        <button type="submit" id="updateBtn" class="btn btn-primary btn-lg">수정</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- 공통 푸터 역할 (최하단) -->
        <footer class="mt-5 pt-3 border-top text-center text-muted small">
            <p>&copy; 2025 Competency Assessment System. All rights reserved.</p>
        </footer>
    </main>
</div>

<!-- Custom Modal for Confirmation/Alerts (confirm() 대신 사용) -->
<div class="modal fade" id="customConfirmModal" tabindex="-1" aria-labelledby="customConfirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="customConfirmModalLabel">확인</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="customConfirmModalBody">
                <!-- 메시지가 여기에 들어갑니다. -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">아니오</button>
                <button type="button" class="btn btn-primary" id="customConfirmYesBtn">예</button>
            </div>
        </div>
    </div>
</div>

<!-- 스크립트 로드 -->
<!-- Bootstrap 5 JavaScript Bundle 로드 (햄버거 메뉴/Offcanvas 기능 포함) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- 기존 스크립트 경로 유지 (가상의 경로를 사용) -->
<script th:src="@{/js/common/config.js}"></script>
<script th:src="@{/js/common/api-utils.js}"></script>
<script th:src="@{/js/common/error-handler.js}"></script>
<script th:src="@{/js/mypage/user-info-edit.js}"></script>
</body>
</html>
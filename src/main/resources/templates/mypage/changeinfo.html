<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원 정보 수정</title>
    <!-- Bootstrap 5 CSS 로드 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome 아이콘 로드 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <!-- 사용자 정의 CSS -->
    <link rel="stylesheet" href="user-management.css" />
</head>
<body>

<div class="d-flex align-items-center justify-content-center min-vh-100 bg-light">
    <div class="card shadow-lg rounded-4 user-card">
        <div class="card-header bg-primary text-white text-center rounded-top-4 py-3">
            <h4 class="mb-0 fw-bold">내 정보 수정</h4>
        </div>
        <div class="card-body p-4 p-md-5">
            <div id="alertMessage" class="alert alert-danger d-none" role="alert"></div>

            <form id="userInfoForm" onsubmit="event.preventDefault(); updateUserInfo()">

                <!-- 읽기 전용 필드: 학번 -->
                <div class="mb-3">
                    <label for="studentId" class="form-label fw-semibold">학번</label>
                    <input type="text" class="form-control" id="studentId" value="202212345" readonly disabled>
                </div>

                <!-- 읽기 전용 필드: 이름 -->
                <div class="mb-3">
                    <label for="name" class="form-label fw-semibold">이름</label>
                    <input type="text" class="form-control" id="name" value="홍길동" readonly disabled>
                </div>

                <!-- 읽기 전용 필드: 생년월일 -->
                <div class="mb-3">
                    <label for="birthDate" class="form-label fw-semibold">생년월일</label>
                    <input type="text" class="form-control" id="birthDate" value="1999-01-01" readonly disabled>
                </div>

                <!-- 수정 가능 필드: 이메일 -->
                <div class="mb-3">
                    <label for="email" class="form-label fw-semibold"><i class="fas fa-envelope me-2"></i>이메일 <span class="text-danger">*</span></label>
                    <input type="email" class="form-control" id="email" name="email" placeholder="email@example.com" required>
                    <div class="invalid-feedback">유효한 이메일 주소를 입력해주세요.</div>
                </div>

                <!-- 수정 가능 필드: 전화번호 -->
                <div class="mb-4">
                    <label for="phone" class="form-label fw-semibold"><i class="fas fa-phone me-2"></i>전화번호</label>
                    <input type="tel" class="form-control" id="phone" name="phone" placeholder="010-1234-5678">
                    <div class="invalid-feedback">유효한 전화번호를 입력해주세요.</div>
                </div>

                <!-- 비밀번호 변경 버튼 링크 -->
                <div class="mb-4 text-end">
                    <a href="changePW.html" class="text-decoration-none text-primary fw-medium small">비밀번호만 별도로 변경하시겠습니까? <i class="fas fa-arrow-right-long ms-1"></i></a>
                </div>

                <!-- 저장 버튼 -->
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-lg fw-bold" id="updateButton">
                        <span id="buttonText">정보 수정</span>
                        <span id="spinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Bootstrap 5 JS Bundle 로드 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- 사용자 정의 스크립트 로드: fetchUserInfo 함수가 정의된 파일 -->
<script src="user-management.js"></script>
<script>
    // 페이지 로드 시 사용자 정보 조회 함수 호출: user-management.js 로드 후에 실행되도록 순서 변경
    document.addEventListener('DOMContentLoaded', fetchUserInfo);
</script>
</body>
</html>